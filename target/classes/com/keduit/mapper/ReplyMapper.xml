<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.keduit.mapper.ReplyMapper">
  
  	<insert id="insert">
  		insert into CompanyVal_reply_TB(rno, bno, reply, userid) 
  		values(seq_CompanyVal_reply, #{bno}, #{reply}, #{userid})
  	</insert>
  
  	<delete id="delete">
  		delete from CompanyVal_reply_TB where rno = #{rno}
  	</delete>
  	
  	<update id="update">
  		update CompanyVal_reply_TB set reply = #{reply}, updatedate = sysdate
  		 where rno = #{rno}
  	</update>
  	
 <!--  	<select id="getListWithPaging" resultType="com.keduit.domain.ReplyVO">
<![CDATA[
	select rno, bno, reply, userid, regdate, updatedate 
	from(
	select /*+ index(CompanyVal_reply_TB idx_reply) */
		rownum rn, bno, rno, reply, userid, regdate, updatedate
	from CompanyVal_reply_TB
 	where bno = #{bno} and rno > 0 and rownum <= #{cri.pageNum} * #{cri.amount})
		where rn > (#{cri.pageNum}) - 1 * #{cri.amount}
]]>
  	</select> 	
 -->
 
 <select id="getListWithPaging" resultType="com.keduit.domain.ReplyVO">
	select rno, bno, reply, userid, regdate, updatedate 
	from CompanyVal_reply_TB
 	where bno = #{bno} order by rno asc
  	</select> 
  	
  	
  	<select id="read" resultType="com.keduit.domain.ReplyVO">
  		select * from CompanyVal_reply_TB where bno = #{bno}
  	</select>
  
  	
  	
  	<select id="getCountByBno" resultType="int">
  	select count(rno) from CompanyVal_reply_TB where bno = #{bno}
  	</select>
  	
  </mapper>